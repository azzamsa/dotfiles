#!/bin/bash

#
#  Clean temporary files
#

clean_tmp() {
  echo "ğŸ§½ Cleaning temporary system files"
  rm -rf /var/tmp/* /tmp/*
}

clean_all() {
  clean_tmp

  echo "ğŸ§½ Cleaning dependencies and build artifacts"
  kondo --older 1M

  echo "ğŸ§½ Cleaning unused dnf package"
  sudo dnf autoremove

  echo "ğŸ§½ Cleaning unused flatpak package"
  flatpak uninstall --unused

  echo "ğŸ§½ Cleaning package manager cache"
  sudo dnf clean packages

  echo "ğŸ§½ Cleaning dagling dockerfiles"
  # https://docs.docker.com/engine/reference/commandline/system_prune/
  docker system prune
}

case $1 in
"tmp") clean_tmp ;;
*) clean_all ;;
esac

echo "âœ¨ You have a new shiny machine!"
